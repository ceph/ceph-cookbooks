[global]
  fsid =  <%= node["ceph"]["config"]["fsid"] %>
  mon initial members = <%= node["ceph"]["config"]["mon_initial_members"] %>
  mon host = <%= @mon_addresses.join(', ') %>
<% unless node['ceph']['config']['global'].nil? -%>
  <% node['ceph']['config']['global'].each do |k, v| %>
  <%= k %> = <%= v %>
  <% end %>
<% end -%>

<% unless node['ceph']['config']['osd'].nil? -%>
[osd]
<%   node['ceph']['config']['osd'].each do |k, v| -%>
  <%= k %> = <%= v %>
<%   end -%>
<% end -%>

<% unless node['ceph']['config']['mon'].nil? -%>
[mon]
<%   node['ceph']['config']['mon'].each do |k, v| -%>
  <%= k %> = <%= v %>
<%   end -%>
<% end -%>

<% unless node['ceph']['config']['mds'].nil? -%>
[mds]
<%   node['ceph']['config']['mds'].each do |key, value| -%>
  <%= key %> = <%= value %>
<%   end -%>
<% end -%>

<% if node['ceph']["radosgw"]["enable"] -%>
[client.radosgw.<%= node['hostname'] %>]
<%   node['ceph']['config']['radosgw'].each do |config, value| -%>
<%     if value -%>
  <%= config %> = <%= value %>
<%     end -%>
<%   end -%>

<% end -%>
<% node['ceph']['config-sections'].each do |name, sect| -%>
[<%= name %>]
<%   sect.each do |k, v| -%>
  <%= k %> = <%= v %>
<%   end -%>
<% end -%>
